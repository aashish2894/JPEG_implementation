function [ final_output ] = huff_code_C( C_DC, C_AC )
%UNTITLED2 Summary of this function goes here
%   Detailed explanation goes here
% Huffman table for Chrominance(Cb,Cr)-AC
C_AC_code = {'00','01','100','1010','1011','1100','11010','11011','11100','111010','111011','1111000','1111001','1111010','1111011','11111000','11111001','11111010','111110110','111110111','111111000','111111001','111111010','1111110110','1111110111','1111111000','1111111001','1111111010','11111110110','11111110111','11111111000','11111111001','111111110100','111111110101','111111110110','111111110111','111111111000000','1111111110000010','1111111110000011','1111111110000100','1111111110000101','1111111110000110','1111111110000111','1111111110001000','1111111110001001','1111111110001010','1111111110001011','1111111110001100','1111111110001100','1111111110001110' ,'1111111110001111','1111111110010000','1111111110010001','1111111110010010','1111111110010011','1111111110010100','1111111110010101','1111111110010110','1111111110010111','1111111110011000','1111111110011001','1111111110011010','1111111110011011','1111111110011100','1111111110011101','1111111110011110','1111111110011111','1111111110100000','1111111110100001','1111111110100010','1111111110100011','1111111110100100','1111111110100101','1111111110100110','1111111110100111','1111111110101000','1111111110101001','1111111110101010','1111111110101011','1111111110101100','1111111110101101','1111111110101110','1111111110101111','1111111110110000','1111111110110001','1111111110110010','1111111110110011','1111111110110100','1111111110110101','1111111110110110','1111111110110111','1111111110111000','1111111110111001','1111111110111010','1111111110111011','1111111110111100','1111111110111101','1111111110111110','1111111110111111','1111111111000000','1111111111000001','1111111111000010','1111111111000011','1111111111000100','1111111111000101','1111111111000110','1111111111000111','1111111111001000','1111111111001001','1111111111001010','1111111111001011','1111111111001100','1111111111001101','1111111111001110','1111111111001111','1111111111010000','1111111111010001','1111111111010010','1111111111010011','1111111111010100','1111111111010101','1111111111010110','1111111111010111','1111111111011000','1111111111011001','1111111111011010','1111111111011011','1111111111011100','1111111111011101','1111111111011110','1111111111011111','1111111111100000','1111111111100001','1111111111100010','1111111111100011','1111111111100100','1111111111100101','1111111111100110','1111111111100111','1111111111101000','1111111111101001','1111111111101010','1111111111101011','1111111111101100','1111111111101101','1111111111101110','1111111111101111','1111111111110000','1111111111110001','1111111111110010','1111111111110011','1111111111110100','1111111111110101','1111111111110110','1111111111110111','1111111111111000','1111111111111001','1111111111111010','1111111111111011','1111111111111100','1111111111111101','1111111111111110'};
C_AC_run_length = {'01', '02', '03', '00', '04', '11', '05', '12','21', '31', '41', '06', '13', '51', '61', '07','22', '71', '14', '32', '81', '91', 'a1', '08','23', '42', 'b1', 'c1', '15', '52', 'd1', 'f0','24', '33', '62', '72', '82', '09', '0a', '16','17', '18', '19', '1a', '25', '26', '27', '28','29', '2a', '34', '35', '36', '37', '38', '39','3a', '43', '44', '45', '46', '47', '48', '49', '4a', '53', '54', '55', '56', '57', '58', '59','5a', '63', '64', '65', '66', '67', '68', '69', '6a', '73', '74', '75', '76', '77', '78', '79','7a', '83', '84', '85', '86', '87', '88', '89','8a', '92', '93', '94', '95', '96', '97', '98','99', '9a', 'a2', 'a3', 'a4', 'a5', 'a6', 'a7','a8', 'a9', 'aa', 'b2', 'b3', 'b4', 'b5', 'b6','b7', 'b8', 'b9', 'ba', 'c2', 'c3', 'c4', 'c5','c6', 'c7', 'c8', 'c9', 'ca', 'd2', 'd3', 'd4','d5', 'd6', 'd7', 'd8', 'd9', 'da', 'e1', 'e2','e3', 'e4', 'e5', 'e6', 'e7', 'e8', 'e9', 'ea','f1', 'f2', 'f3', 'f4', 'f5', 'f6', 'f7', 'f8','f9', 'fa'};
% Huffman table for Chrominance(C)-DC
C_DC_code = {'00';'01';'100';'101';'1100';'1101';'1110';'11110';'111110';'1111110';'11111110';'111111110'};
C_DC_length = [1;0;2;3;4;5;6;7;8;9;10;11];
final_output = '';  % final output will be the string of huffman code
% C Chrominance AC
C_AC_huffman_code ='';
for i = 1:size(C_AC,1)
    if C_AC(i,1) == 0 && C_AC(i,3) == 0
        i_AC = find(ismember(C_AC_run_length,'00'));
        C_AC_huffman_code = strcat(C_AC_huffman_code,C_AC_code(i_AC));
        break;
    end
    if C_AC(i,1) <= 15
        binary_value = dec2bin(abs(C_AC(i,3)));
        if C_AC(i,3) < 0 
            for k = 1:length(binary_value)
                if binary_value(k) == '0'
                    binary_value(k) = '1';
                else
                    binary_value(k) = '0';
                end
            end
        end
        runlength = strcat(dec2hex(C_AC(i,1)),dec2hex(C_AC(i,2)));
        i_AC = find(ismember(C_AC_run_length,lower(runlength)));
        C_AC_huffman_code = strcat(C_AC_huffman_code,C_AC_code(i_AC));
        C_AC_huffman_code = strcat(C_AC_huffman_code,binary_value);
    else
        i_f0 = find(ismember(C_AC_run_length,'f0'));
        C_AC_huffman_code = strcat(C_AC_huffman_code,C_AC_code(i_f0));
        binary_value = dec2bin(abs(C_AC(i,3)));
        if C_AC(i,3) < 0 
            for k = 1:length(binary_value)
                if binary_value(k) == '0'
                    binary_value(k) = '1';
                else
                    binary_value(k) = '0';
                end
            end
        end
        runlength = strcat(dec2hex(C_AC(i,1)-16),dec2hex(C_AC(i,2)));
        i_AC = find(ismember(C_AC_run_length,lower(runlength)));
        C_AC_huffman_code = strcat(C_AC_huffman_code,C_AC_code(i_AC));
        C_AC_huffman_code = strcat(C_AC_huffman_code,binary_value);
    end    
end
% C Chrominance DC
C_DC_huffman_code = dec2bin(abs(C_DC));
for i = 1:length(C_DC_length)
    if C_DC_length(i)==length(C_DC_huffman_code)
        i_DC = i;
        break;
    end
end
if C_DC < 0 
    for i = 1:length(C_DC_huffman_code)
        if C_DC_huffman_code(i) == '0'
            C_DC_huffman_code(i) = '1';
        else
            C_DC_huffman_code(i) = '0';
        end
    end
end
C_DC_huffman_code = strcat(C_DC_code(i_DC),C_DC_huffman_code);
if C_DC == 0
    C_DC_huffman_code = '00';
end
C_DC_AC = strcat(C_DC_huffman_code,C_AC_huffman_code);
final_output = strcat(final_output,C_DC_AC);
end